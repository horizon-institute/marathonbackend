{% extends 'base_v2.html' %}
{% load highlight %}

{% block bottom_content %}
    <h2>Search</h2>

    <form method="get" action=".">
        {{ form.q }}
        <input type="submit" value="Search" />

        {% if query %}
        <h3>Results</h3>
        <ul class="item-list">
            {% for result in page.object_list %}
            <li class="item">
            <div class="item-video">
                <img src="{% if result.thumbnail %}{{result.thumbnail}}{%else%}{{STATIC_URL}}images/no-thumbnail.png{% endif %}" />
            </div>
            <ul class="video-metadata">
                <li>
                    {% highlight result.text with query %}
                </li>
            </ul>
            </li>
            {% empty %}
            <p>No results found.</p>
            {% endfor %}
        </ul>
            {% if page.has_previous or page.has_next %}
        <div class="pagination">
            {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
            {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
        </div>
            {% endif %}
        {% else %}
        <p>Try typing the name or number of a runner, the name of a street, a distance or a time!</p>
        {% endif %}
    </form>
{% endblock %}